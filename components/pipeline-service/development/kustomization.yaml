apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Skip applying the Tekton/PaC operands while the Tekton/PaC operator is being installed.
# See more information about this option, here: 
# https://argo-cd.readthedocs.io/en/stable/user-guide/sync-options/#skip-dry-run-for-new-custom-resources-types 
commonAnnotations:
  argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true

resources:
  # - git::https://github.com/openshift-pipelines/pipeline-service.git/operator/gitops/argocd/pipeline-service?ref=c3d1e5f85e64205a3c4fd7476d0ef0d03e4b570f
  # - git::https://github.com/openshift-pipelines/pipeline-service.git/operator/gitops/argocd/pipeline-service/tekton-results/base?ref=c99ad936f808dd78acdba1374d311f84548fae89
  # database
  - https://raw.githubusercontent.com/openshift-pipelines/pipeline-service/c99ad936f808dd78acdba1374d311f84548fae89/developer/local/postgres/db-service.yaml
  - https://raw.githubusercontent.com/openshift-pipelines/pipeline-service/c99ad936f808dd78acdba1374d311f84548fae89/developer/local/postgres/db-statefulset.yaml
  - git::https://github.com/openshift-pipelines/pipeline-service.git/developer/openshift/gitops/argocd/pipeline-service?ref=40eeb2ee7df776f3b6a9ff579055475c73007139
  - job-permissions.yaml
  - minio-tenant-installed-check-job.yaml
components:
  - ../components/tekton-chains

patchesStrategicMerge:
  - minio-tekton-results-sync-patch.yaml
